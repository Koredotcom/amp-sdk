# AMP SDK - Stainless Configuration
# Agent Management Platform - External SDK for customers
# For generating TypeScript/Python SDKs for external customers
# Docs: https://www.stainless.com/docs
#
# NOTE: Internal project name is "ACP" (Agent Control Plane)
#       External/SDK name is "AMP" (Agent Management Platform)

project:
  name: amp
  organization: kore-ai

# OpenAPI spec location
openapi:
  path: ./openapi/amp-telemetry-sdk.yaml

# Output configuration
# NOTE: Stainless will push generated SDK to these repositories
# For Bitbucket: Use SSH URL format or configure Stainless with Bitbucket integration
targets:
  typescript:
    package_name: "@amp/sdk"
    output_dir: ./packages/typescript
    # TODO: Update with your Bitbucket repository URL
    # Stainless supports Bitbucket - contact support@stainless.com for setup
    repository_url: "https://bitbucket.org/kore-ai/amp-sdk"
    module_format: esm
    runtime: node  # node | browser | universal

  python:
    package_name: "amp-sdk"
    output_dir: ./packages/python
    # TODO: Update with your Bitbucket repository URL
    repository_url: "https://bitbucket.org/kore-ai/amp-sdk"

# SDK behavior configuration
client:
  # Default timeout for all requests (30 seconds)
  default_timeout: 30000
  
  # Retry configuration
  max_retries: 3
  retry_status_codes: [429, 500, 502, 503, 504]
  
  # Exponential backoff settings
  initial_retry_delay: 500      # 0.5 seconds
  max_retry_delay: 8000         # 8 seconds
  retry_delay_multiplier: 2.0

# Pagination settings (not used for telemetry, but available for future)
pagination:
  default_page_size: 100
  max_page_size: 1000

# Custom configuration
settings:
  # Don't generate for internal-only endpoints
  exclude_paths:
    - /api/v1/internal/*
    - /api/v1/admin/*
    - /api/v1/agentic-telemetry    # Internal: Kore agentic product
    - /api/v1/aiforwork-telemetry  # Internal: AI4Work
    - /api/v1/searchai-telemetry   # Internal: SearchAI

  # Transform endpoint operationIds to SDK method names
  naming:
    # POST /api/v1/telemetry -> client.telemetry.ingest()
    # GET /api/v1/health -> client.health.check()
    operations:
      TelemetryController_submit: ingestTelemetry
      getHealth: checkHealth

# Environment variable prefixes for SDK users
env_vars:
  api_key: AMP_API_KEY
  base_url: AMP_BASE_URL
  project_id: AMP_PROJECT_ID

